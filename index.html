<!doctype html>
<html ng-app="myApp">
	<head>
		<style>
			#mainWrapper{
				width:475px;
				text-align:center;
				margin:auto 0px;
			}
			.tiles{
				float:left;
				width:150px;
				border: 1px solid black;
				height:150px;
				text-align:center;
				cursor:pointer;
				color: transparent;
			}
			.tiles div{
				padding-top:20%;
			}
			.red{
				background-color:red;
			}
			.green{
				background-color:green;
			}
		</style>
	</head>
	<body>
		<button style="cursor:pointer" id="restart">Restart Game</button>
		<h1 id="instruction"></h1>
		<div id="mainWrapper"></div>
		<script type="text/javascript">
			(function(){
				var flag, count, gameEnd;
				
				document.getElementById("restart").addEventListener("click", function(){
					resetGame();
				});
				
				var resetGame = function(){
					var tile,i;
					flag= false;
					count = 0;
					gameEnd = false;
					document.getElementById("mainWrapper").innerHTML = "";
					for(i=1; i<=9; i++){
						tile = document.createElement("div");
						tile.setAttribute('class','tiles');
						tile.innerText = i;
						tile.addEventListener("click", function(){
							if(this.innerText !== "0" && this.innerText !== "X" && !gameEnd)
							{
								changeTile(this);
							}
						});
						document.getElementById("mainWrapper").appendChild(tile);
					}
				}
				
				var changeTile = function(tile){
					if(flag){
						tile.setAttribute("class",tile.getAttribute("class")+" red");
						tile.innerText = "0";
					}else{
						tile.setAttribute("class",tile.getAttribute("class")+" green");
						tile.innerText = "X";
					}
					count++;
					flag = !flag;
					checkResult()
				}
				
				var checkResult = function(){
					var tiles = document.getElementById("mainWrapper").getElementsByClassName("tiles");
					if(checkEquality(tiles[0].innerText,tiles[1].innerText,tiles[2].innerText) ||
					   checkEquality(tiles[3].innerText,tiles[4].innerText,tiles[5].innerText) ||
					   checkEquality(tiles[6].innerText,tiles[7].innerText,tiles[8].innerText) ||
					   checkEquality(tiles[0].innerText,tiles[3].innerText,tiles[6].innerText) ||
					   checkEquality(tiles[1].innerText,tiles[4].innerText,tiles[7].innerText) ||
					   checkEquality(tiles[2].innerText,tiles[5].innerText,tiles[8].innerText) ||
					   checkEquality(tiles[0].innerText,tiles[4].innerText,tiles[8].innerText) ||
					   checkEquality(tiles[6].innerText,tiles[4].innerText,tiles[2].innerText)){
						gameEnd = true;
						if(flag){alert("Player 1 won.");} else {alert("Player 2 won.");}
					}else if(count === 9){
						alert('No result.');
					}
				}
				
				var checkEquality = function(a,b,c){
					if(a === b && b === c)
					{
						return true;
					}
					
					return false;
				}
				resetGame();
			})();
		</script>
	</body>
</html>
